#!/usr/bin/env bash

JAR="$(ls target/scala-*/*assembly*.jar)"

# -j option forces rebuild of jar
if [ -z "$JAR" ] || [ "$1" == -j ]; then
  echo "Building the binary"
  sbt assembly
  JAR="$(ls target/scala-*/*assembly*.jar)"

  if [ "$1" == -j ]; then shift; fi
fi

# --help option gives usage
java -cp "$JAR" GitStats "$@"
